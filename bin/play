#!/bin/bash
source ~/bin/GLOBAL
#记录到rofi
#export FILE_PATH=`python -c "$REMOVE_USERNAME" "$1"`
#echo 1 ./bin/play \"$FILE_PATH\" >> 
python ~/bin/add2rofi.py "$ROFI_HISTORY" 1 ./bin/play "$@"

export FILE_PATH=`python -c "$ADD_USERNAME" "$1"`

source ~/config/rc/displayrc

if [ -f "$DISPLAY_ROTATION_MARK""right" ]; then
  export MPV_ROTATION="--video-rotate=270"
  echo rotate
else
  export MPV_ROTATION="--video-rotate=0"
fi

#音量:大体来说mpv 60和mpd 20的效果接近.

#################################mpv
pkill mpv
mpv \
  --script-opts=osc-layout=bottombar \
  --no-border \
  --slang=chi,chn,zh,eng,en \
  --alang=jpn,jp,eng,en \
  --volume=60 \
  --save-position-on-quit \
  $MPV_ROTATION \
  "$FILE_PATH" \
#  &

  #--save-position-on-quit \ 这个选项据说在 SIGTERM的情况下是有效的.
  #--write-filename-in-watch-later-config \
  #这个对于resume没有用处,这个似乎并不像mpd一样定时调度，而是仅仅在退出的时候保存一次,但是crash的话,就保存不了了.所以解决不了mpv crash的问题.
  #--geometry=100%x100%+0+0 \
  #--autofit=100% \
#   \
  #--no-osc \
  #--osd-bar \

# keybind 
# 播放next     '>' 
# 播放previous   '<'
# 文件名      'I'


############################vlc
#preferences/interface/main interfaces: remote control interface
#preferences/interface/main interfaces/rc: "fake tty" "unix socket command input=/dev/shm/.vlc.sock"
#echo -n "random off" | nc -U  /dev/shm/vlc
#echo -n "clear" | nc -U  /dev/shm/vlc
#vlc --qt-minimal-view "$1"

#smplayer "$@"

